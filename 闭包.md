# 闭包 #
## 闭包概念 ##
**高程上关于闭包的定义：闭包是指有权访问另一个函数作用域中的变量的函数**<br>
简单理解就是：**定义在一个函数内部的函数**，把我们的目的和我们的目的所涉及的资源全给自动打包在一起让人来使用。<br>
本质上：闭包就是将函数内部和函数外部连接起来的一座桥梁。<br>
创建闭包的方式：在一个函数内部创建另一个函数


    c
        let a = 2;

        function bar() {
           console.log( a );
          }
 
         return bar;
         }
       let baz = foo()；
       baz();//2


 **当一个函数能够记住并访问到其所在的词法作用域及作用域链，特别强调是在其定义的作用域外进行的访问，此时该函数和其上层执行上下文共同构成闭包。**<br>

   需要明确的几点：<br>
1. 闭包一定是函数对象<br>
2. 闭包和词法函数嵌套，作用域链，垃圾回收机制息息相关<br>
3. 当函数一定是在其定义的作用域外进行的访问时，才产生闭包<br>
4. 闭包是由该函数和其上层执行上下文共同构成<br>
当Js引擎执行了这行代码：<br>

    let baz = foo();

此时，JS的作用域气泡是这样的：



![](https://camo.githubusercontent.com/d53a62422ef9f3e1c952ead6184e262ebd4521c3/68747470733a2f2f706963342e7a68696d672e636f6d2f76322d38386135313362613263653237623562343165633665313838643037623330665f722e6a7067)
## 闭包的用途 ##
1、读取其他函数内部的变量<br>
2.让这些变量的始终保持在内存中，这是一个双刃剑，可以方便的访问内部的变量，即使函数执行完成，其内部变量还保存在内存中可以访问，但是也会带来一系列的问题，外部函数的作用域链和变量对象不能销毁，占用内存。
###使用闭包
    function f(x) {
    return function(y){
        return x+y
     }
    }
    console.log(f(2));  //返回一个函数
    console.log(f(2)(3));  //5 

缺点：引起内存泄漏<br>
写一个闭包
闭包中的this对象<br>
闭包的执行环境具有全局性，所以在闭包中，this一般指向window